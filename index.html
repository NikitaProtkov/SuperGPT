<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Мой чат</title>
  </head>
  <body>
    <div id="chat"></div>
    <input type="text" id="user-input">
    <button onclick="sendMessage()">Отправить</button>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
      function sendMessage() {
        var userInput = document.getElementById("user-input");
        var message = userInput.value;

        // вызываем функцию botResponse() и сохраняем результат в переменной response
        botResponse(message);

        // очищаем поле ввода
        userInput.value = "";
      }

      function botResponse(input) {
        $.ajax({
          type: "POST",
          url: "https://api.openai.com/v1/engines/davinci-codex/completions",
          headers: {
            "Content-Type": "application/json",
            // ЗДЕСЬ НУЖНО ВСТАВИТЬ ВАШ КЛЮЧ API
            Authorization: "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",
          },
          data: JSON.stringify({
            prompt: "User: " + input + "\nBot:",
            max_tokens: 50,
            temperature: 0.5,
            top_p: 1,
            frequency_penalty: 0,
            presence_penalty: 0,
          }),
          success: function (data) {
            let response = data.choices[0].text.trim();
            if (!response) {
              response = "I'm sorry, I'm not sure what you're asking.";
            }
            $("#chat").append(
              '<div class="chat-message"><span class="chat-message-name">Bot:</span>' +
               response +
               "</div>"
            );
          },
          error: function () {
            $("#chat").append(
              '<div class="chat-message"><span class="chat-message-name">Bot:</span>Oops! Something went wrong.</div>'
            );
          },
        });
      }
    </script>
  </body>
</html>
